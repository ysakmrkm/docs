extends ../layout

block head
  link(rel='stylesheet', href='/css/editor.css')

block main
  if docTitle && docBody
    - var status = 'edit'
  else
    - var status = 'new'

  if status === 'new'
    - var action = '/files/create'
  if status === 'edit'
    - var action = '/files/'+id

  form(method='post', action!='#{action}').form
    p.title.form-item
      if docTitle
        input(type='text' name='title' required='reqired' value='#{docTitle}')#title
      else
        input(type='text' name='title' required='reqired')#title
      label(for='title') Title

    div.body.form-item
      textarea(rows='10', cols='30', name='document' required='reqired' oninput='this.editor.update()')#markdown.item-contents
        if docBody
          | #{docBody}
      label(for='markdown') Text

      div#preview.item-contents

    ul.button-list
      li.button-item.save
        if status === 'new'
          button(type='submit', name='save').button.waves-effect Create
            i.mdi-editor-insert-drive-file.left
        if status === 'edit'
          input(type='hidden', name='_method', value='put')
          button(type='submit', name='save').button.waves-effect Update
            i.mdi-content-save.left
      li.button-item.back
        a(href="/main").button.waves-effect Go back
          i.mdi-navigation-arrow-back.left

block script
  script(src='/js/markdown.js')
  script(src='/js/editor.js')
